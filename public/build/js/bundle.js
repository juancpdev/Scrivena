function confirmDelete(e,t){e.preventDefault(),Swal.fire({title:"Confirmación",text:"¿Estás seguro de que deseas eliminar este registro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&document.getElementById(t).submit()})}function menu(){const e=document.querySelector(".abrir_menu"),t=document.querySelector(".caja_nav");if(e){e.addEventListener("click",(function(){t.classList.contains("activo")?(t.classList.remove("activo"),e.classList.remove("activo")):(t.classList.add("activo"),e.classList.add("activo"))}))}}function carrouselInicio(){const e=document.querySelector(".carrusel"),t=document.querySelectorAll(".carrusel .elemento"),n=document.querySelector(".carrusel-nav");let a,o=0,i=!1;if(e){function c(){n.querySelectorAll(".nav-dot").forEach((e,t)=>{e.classList.toggle("active",t===o)})}function s(){o<t.length-1?o++:o=0,r(),c()}function r(){const e=100*-o;t.forEach(t=>{t.style.transform=`translateX(${e}%)`})}t.forEach((e,t)=>{const a=document.createElement("div");a.classList.add("nav-dot"),0===t&&a.classList.add("active"),a.addEventListener("click",()=>{!function(e){o=e,r(),c()}(t)}),n.appendChild(a)}),e.addEventListener("touchstart",e=>{a=e.touches[0].clientX,i=!0}),e.addEventListener("touchmove",e=>{if(i){const n=e.touches[0].clientX,l=n-a;Math.abs(l)>30&&(l>0?function(){o>0?o--:o=t.length-1;r(),c()}():s(),a=n,i=!1)}}),e.addEventListener("touchend",()=>{i=!1}),setInterval(s,5e3)}}function idiomas(){const e=document.querySelector(".language-toggle"),t=document.querySelector(".circle");if(e){const a=new URLSearchParams(window.location.search);function n(){const e=a.get("lang");"es"===e?t.style.transform="translate(0, -50%)":"en"===e&&(t.style.transform="translate(100%, -50%)")}e.addEventListener("click",(function(){e.classList.toggle("active");const t="es"===a.get("lang")?"en":"es";a.set("lang",t);const o=`${window.location.origin}${window.location.pathname}?${a.toString()}`;setTimeout(()=>{n()},300),setTimeout(()=>{window.location.href=o},600)})),n()}}function alertaFormulario(){document.querySelectorAll(".desaparecer-alerta").forEach(e=>{e&&setTimeout(()=>{e.remove()},4e3)})}function seleccionarFecha(){const e=document.getElementById("fechaInicio"),t=document.getElementById("fechaFin");e&&e.addEventListener("input",(function(e){validarDiaSeleccionado(e.target,".alerta-fechainicio")})),t&&t.addEventListener("input",(function(e){validarDiaSeleccionado(e.target,".alerta-fechafin")}))}function validarDiaSeleccionado(e,t){const n=e.value.split("-");parseInt(n[2],10)>28&&(mostrarAlerta("Elegir fecha entre el 1 y el 28","error",t),e.value="")}function mostrarAlerta(e,t,n){const a=document.querySelector(".alerta");a&&a.remove();const o=document.createElement("DIV");o.classList.add("alerta","alerta__"+t),o.innerHTML=e;document.querySelector(n).appendChild(o),setTimeout(()=>{o.remove()},3e3)}document.addEventListener("DOMContentLoaded",(function(){menu(),carrouselInicio(),idiomas(),alertaFormulario(),seleccionarFecha()})),function(){const e=document.querySelector("#clienteContrato");if(e){let a=[],o=[];const i=document.querySelector("[name=inversionista_id]"),c=document.querySelector("#listado-clientes");if(async function(){const e=await fetch("/api/clientes");!function(e=[]){a=e.map(e=>({nombre:`${e.nombre.trim()} ${e.apellido.trim()}`,id:e.id}))}(await e.json())}(),e.addEventListener("input",(function(t){const i=t.target.value;if(i.length>3){const e=new RegExp(i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i");o=a.filter(t=>{if(-1!==t.nombre.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").search(e))return t})}else o=[];!function(){e.addEventListener("input",(function(){c.getElementsByTagName("li").length>0?c.classList.add("listado-clientes__cliente--con-margen"):c.classList.remove("listado-clientes__cliente--con-margen")}));for(;c.firstChild;)c.removeChild(c.firstChild);if(o.length>0)o.forEach(e=>{const t=document.createElement("LI");t.classList.add("listado-clientes__cliente"),t.textContent=e.nombre,t.dataset.clienteId=e.id,t.onclick=n,c.appendChild(t)});else if(e.value.length>3){const e=document.createElement("P");e.classList.add("listado-clientes__no-resultado"),e.textContent="No hay resultados para tu búsqueda",c.appendChild(e)}}()})),i.value){async function t(){const e=await async function(e){const t="/api/cliente?id="+e,n=await fetch(t);return await n.json()}(i.value),{nombre:t,apellido:n}=e,a=document.createElement("LI");a.classList.add("listado-clientes__cliente","listado-clientes__cliente--seleccionado","listado-clientes__cliente--con-margen"),a.textContent=`${t} ${n}`,c.appendChild(a)}t(),e.addEventListener("input",t)}function n(e){const t=e.target,n=document.querySelector(".listado-clientes__cliente--seleccionado");n&&n.classList.remove("listado-clientes__cliente--seleccionado"),t.classList.add("listado-clientes__cliente--seleccionado"),i.value=t.dataset.clienteId}}}(),function(){const e=document.querySelector("#inversion-grafica"),t=document.querySelector("#balance-total");if(e){async function n(){const e=await fetch("/api/contratos"),n=await e.json(),a=n.reduce((e,t)=>e+parseFloat(t.inversion),0),o=n.reduce((e,t)=>e+parseFloat(t.interes),0);var i=(a+o).toFixed(2),c=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");t.textContent="$"+c;var s=new URLSearchParams(window.location.search).get("lang");const r=document.getElementById("inversion-grafica").getContext("2d");new Chart(r,{type:"doughnut",data:{labels:["Inversiones","Interés"],datasets:[{data:[a,o],backgroundColor:["#123c49","#30aeb9"]}]},options:{plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),"undefined"!==e.parsed&&("Inversiones"===e.label?"es"===s?t+="Inversiónes: ":"en"===s&&(t+="Investments: "):"Interés"===e.label&&("es"===s?t+="Interéses: ":"en"===s&&(t+="Interests: ")),t+=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.parsed)),t}}}}}})}n()}const a=document.querySelector("#tipos-grafica"),o=document.querySelector("#tipos-total");if(a){async function n(){const e=await fetch("/api/contratostotal"),t=await e.json(),n=[];t.forEach(e=>{const t=e.tipo;n.push(t)});const a=["Inversión en Minería","Desarrollos Inmobiliarios","Fondos de Inversión USA","Remates Inmobiliarios"],i={};a.forEach((e,t)=>{i[e]=t});const c=Array(a.length).fill(0);n.forEach(e=>{const t=i[e];void 0!==t&&c[t]++});let s=0;c.forEach(e=>{s+=e}),o.textContent=s;const r=document.getElementById("tipos-grafica").getContext("2d");new Chart(r,{type:"doughnut",data:{labels:["Inversión en Minería","Desarrollos Inmobiliarios","Fondos de Inversión USA","Remates Inmobiliarios"],datasets:[{data:c,backgroundColor:["#87A09B","#4D686F","#6D929B","#314E52","#659597","#A2B3A4","#566F7E","#829CA5","#4E6A71","#3E5055"]}]},options:{plugins:{legend:{display:!1}}}})}n()}const i=document.querySelector("#paises-grafica"),c=document.querySelector("#paises-total");if(i){async function n(){const e=await fetch("/api/clientes"),t=await e.json(),n=[],a=(t.forEach(e=>{n.push(e.pais)}),{}),o=n.filter(e=>!a[e]&&(a[e]=!0,!0)),i={};n.forEach(e=>{i[e]=(i[e]||0)+1});const s=Object.values(i);c.textContent=s.length;const r=document.getElementById("paises-grafica").getContext("2d");new Chart(r,{type:"doughnut",data:{labels:o,datasets:[{data:s,backgroundColor:["#123C49","#22728A","#63BDD8","#0C2830","#32A8CC","#245D6D","#398AA8","#7AC2E2","#185E7A","#2A8DAB","#124749","#122649"]}]},options:{plugins:{legend:{display:!1}}}})}n()}}(),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".criptos");if(e){var t=document.createElement("div");t.className="tradingview-widget-container criptomonedas";var n=document.createElement("div");n.className="tradingview-widget-container__widget",t.appendChild(n),e.parentNode.insertBefore(t,e.nextSibling);var a=document.createElement("script");a.type="text/javascript",a.src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js",a.async=!0,t.appendChild(a),a.innerHTML='\n        {\n            "symbols": [\n                {\n                    "proName": "FOREXCOM:SPXUSD",\n                    "title": "S&P 500"\n                },\n                {\n                    "proName": "FOREXCOM:NSXUSD",\n                    "title": "US 100"\n                },\n                {\n                    "proName": "BITSTAMP:BTCUSD",\n                    "title": "Bitcoin"\n                },\n                {\n                    "proName": "BITSTAMP:ETHUSD",\n                    "title": "Ethereum"\n                },\n                {\n                    "description": "USD/MXN",\n                    "proName": "FX:USDMXN"\n                },\n                {\n                    "description": "EUR/USD",\n                    "proName": "FX:EURUSD"\n                }\n            ],\n            "showSymbolLogo": true,\n            "colorTheme": "dark",\n            "isTransparent": false,\n            "displayMode": "adaptive",\n            "locale": "es"\n        }\n    '}}));
//# sourceMappingURL=bundle.js.map
